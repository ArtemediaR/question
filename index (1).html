<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>ðŸ’Œ A tiny questionâ€¦</title>
<meta name="theme-color" content="#f6c58c"/>
<style>
  :root{
    /* palette: peach â†’ gold â†’ lavender (reduced pink) */
    --bg1:#fff8ee;
    --bg2:#ffe7c7;
    --bg3:#ffd3a4;
    --bg4:#ebe3ff;
    --card:#ffffffee;
    --ink:#2a2a2a;
    --muted:#6b6b6b;
    --accent:#7b5cff;     /* lavender */
    --accent-2:#5d45cc;
    --shadow:0 14px 34px rgba(91,69,204,.18);
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial;
    color:var(--ink);
    display:flex; align-items:center; justify-content:center;
    background:
      radial-gradient(1000px 700px at 80% 15%, var(--bg4) 0%, transparent 60%),
      radial-gradient(1100px 900px at 5% 95%, var(--bg2) 0%, transparent 60%),
      linear-gradient(135deg, var(--bg1), var(--bg3));
    overflow:hidden;
    transition: filter .35s ease, opacity .35s ease;
  }
  .wrap{ width:min(720px, 94vw); padding:24px; position:relative; }
  .card{
    background:var(--card);
    border-radius:18px;
    box-shadow:var(--shadow);
    padding:28px 22px 26px;
    backdrop-filter: blur(6px);
    transform:translateY(0);
    animation: floatIn .45s ease both;
  }
  @keyframes floatIn{ from{opacity:0; transform: translateY(10px)} to{opacity:1; transform: translateY(0)}}
  h1,h2,p{margin:0 0 14px}
  h1{font-size:clamp(26px, 5vw, 34px); line-height:1.15; letter-spacing:.2px}
  h2{font-size:clamp(20px, 4.2vw, 26px); font-weight:650; line-height:1.2}
  p{color:var(--muted)}
  .center{ text-align:center }
  .mt{ margin-top:8px }
  .btns{ display:flex; gap:12px; flex-wrap:wrap; justify-content:center; margin-top:12px}
  button{
    appearance:none; border:none; outline:none;
    background:var(--accent);
    color:#fff; padding:12px 20px;
    border-radius:12px; font-size:16px; font-weight:650;
    cursor:pointer; transform: translateY(0) scale(1);
    transition: transform .12s ease, background .2s ease, box-shadow .2s ease;
    box-shadow: 0 8px 18px rgba(91,69,204,.25);
  }
  button:hover{ background:var(--accent-2); transform: translateY(-1px) scale(1.02) }
  button:active{ transform: translateY(1px) scale(.98) }
  .secondary{ background:#eef0ff; color:#2d2d2d; box-shadow:none }
  .secondary:hover{ background:#e4e6ff }
  .ghost{ background:transparent; color:var(--accent); box-shadow:none; border:2px solid var(--accent) }
  .ghost:hover{ color:#fff; background:var(--accent) }
  .hidden{ display:none !important }
  .thanks{ color:#5d45cc; font-weight:700 }
  .fade{ animation: fade .35s ease both }
  @keyframes fade{ from{opacity:0; transform: translateY(6px)} to{opacity:1; transform: translateY(0)}}
  /* typewriter intro */
  .typewrap{ font-weight:800; font-size:clamp(22px,4.6vw,30px); letter-spacing:.3px; color:#3a3550; }
  .caret{ display:inline-block; width:2px; height:1em; background:#3a3550; margin-left:4px; animation: blink 1s step-end infinite }
  @keyframes blink{ 50%{opacity:0} }
  /* blink/ breathing transition */
  .blink{ filter: blur(2px) brightness(.96); opacity:.85 }
  /* countdown overlay */
  .overlay{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background:rgba(10,10,20,.36); backdrop-filter: blur(2px);
    z-index:20;
  }
  .countBox{
    position:relative; width:140px; height:140px;
    display:flex; align-items:center; justify-content:center;
  }
  .pulse{
    position:absolute; inset:0; border-radius:50%;
    border:6px solid rgba(255,255,255,.45); animation: pulse 1.4s ease infinite;
  }
  @keyframes pulse{ 0%{transform:scale(.85); opacity:.7} 70%{transform:scale(1.05); opacity:1} 100%{transform:scale(1.2); opacity:0} }
  .count{
    width:120px; height:120px; border-radius:50%;
    border:6px solid rgba(255,255,255,.9);
    display:flex; align-items:center; justify-content:center;
    color:#fff; font-weight:900; font-size:48px;
    box-shadow:0 10px 30px rgba(0,0,0,.2);
    background: linear-gradient(135deg, rgba(255,255,255,.2), rgba(255,255,255,.05));
  }
  /* final screen tweaks */
  #noBtn{ position:relative; transition: transform .5s ease, opacity .9s ease; }
  .slide-away{ transform: translateX(160%); opacity:.0; pointer-events:none }
  .runaway:hover{ position:absolute; top: calc(10% + (var(--rY,0) * 1%)); left: calc(10% + (var(--rX,0) * 1%)) }
  .foot{ font-size:12px; color:#8a8a8a; margin-top:10px }
  canvas#fx{ position:fixed; inset:0; pointer-events:none; transform: translateZ(0) }
  .restart{ margin-top:12px }
</style>
</head>
<body>
  <canvas id="fx"></canvas>

  <div class="wrap">
    <!-- SCREEN 1 -->
    <section id="s1" class="card center">
      <div class="typewrap"><span id="type"></span><span class="caret"></span></div>
      <p class="mt">When you are ready, letâ€™s start with some questionsâ€¦</p>
      <div class="btns">
        <button id="start">Start</button>
      </div>
    </section>

    <!-- SCREEN 2 -->
    <section id="s2" class="card center hidden">
      <h2 class="fade">Do you like the person in front of you?</h2>
      <div class="btns fade">
        <button class="opt" data-val="Yes">Yes</button>
        <button class="opt" data-val="Obviously">Obviously</button>
      </div>
      <p id="thx" class="thanks hidden fade">Oh wow, thank you!</p>
      <div class="btns">
        <button id="next1" class="secondary hidden">Next</button>
      </div>
    </section>

    <!-- SCREEN 3 -->
    <section id="s3" class="card center hidden">
      <h2 class="fade">Can you ask the person in front of you if he feels the sameâ€¦ and why?</h2>
      <div class="btns">
        <button id="cont" class="secondary">Okay, done!</button>
      </div>
    </section>

    <!-- COUNTDOWN OVERLAY -->
    <div id="tease" class="overlay hidden">
      <div class="countBox">
        <div class="pulse"></div>
        <div class="count" id="countNum">3</div>
      </div>
    </div>

    <!-- SCREEN 4 -->
    <section id="s4" class="card center hidden">
      <h2 class="fade">The final questionâ€¦</h2>
      <h1 class="fade">Soâ€¦ will you be my girlfriend?</h1>
      <div class="btns fade">
        <button id="yesBtn">Yes</button>
        <button id="noBtn" class="secondary">No</button>
      </div>
      <p class="foot">* Choose wisely.</p>
      <div class="btns restart">
        <button id="restart" class="ghost">Restart</button>
      </div>
    </section>
  </div>

<script>
  // helpers
  const qs = s => document.querySelector(s);
  const all = s => [...document.querySelectorAll(s)];
  const show = id => { 
    // breathing blink between screens
    document.body.classList.add('blink');
    setTimeout(()=>{
      all("section").forEach(el=>el.classList.add("hidden"));
      qs("#"+id).classList.remove("hidden");
      document.body.classList.remove('blink');
    }, 220);
  };

  /* ---------- typewriter intro with soft key taps ---------- */
  const intro = "If you are seeing this and you know what it is about, just pretend like you have no idea ðŸ˜‰";
  const typeEl = qs("#type");
  let twIndex = 0;
  function keyTap(ac){
    const o = ac.createOscillator(), g = ac.createGain();
    o.type='square'; o.frequency.value = 880;
    g.gain.value = 0.0001;
    o.connect(g).connect(ac.destination);
    const t = ac.currentTime;
    g.gain.exponentialRampToValueAtTime(0.05, t+0.005);
    g.gain.exponentialRampToValueAtTime(0.0001, t+0.07);
    o.start(t); o.stop(t+0.08);
  }
  let audioC = null;
  function typeNext(){
    if(twIndex >= intro.length) return;
    typeEl.textContent += intro[twIndex];
    // tap sound for non-space chars (on first user interaction some browsers require unlock, so we lazy-init)
    if(intro[twIndex] !== ' '){
      if(!audioC){
        try{ audioC = new (window.AudioContext||window.webkitAudioContext)(); }catch(e){}
      }
      if(audioC) keyTap(audioC);
    }
    twIndex++;
    setTimeout(typeNext, 55 + Math.random()*40);
  }
  // kick off typing after small delay
  setTimeout(typeNext, 400);

  // screen 1 -> 2
  qs("#start").addEventListener("click", ()=> show("s2"));

  // screen 2 interactions
  all(".opt").forEach(btn=> btn.addEventListener("click", ()=>{
    qs("#thx").classList.remove("hidden");
    qs("#next1").classList.remove("hidden");
  }));
  qs("#next1").addEventListener("click", ()=> show("s3"));

  // screen 3 -> countdown -> 4 (with ambient whoosh before reveal)
  qs("#cont").addEventListener("click", ()=> {
    const tease = qs("#tease");
    const num = qs("#countNum");
    let c = 3; num.textContent = c;
    tease.classList.remove("hidden");
    whoosh();
    const timer = setInterval(()=>{
      c--;
      if(c<=0){
        clearInterval(timer);
        tease.classList.add("hidden");
        show("s4");
        if(navigator.vibrate) navigator.vibrate(20); // tiny vibrate on reveal
        finalScreenInit();
      }else{
        num.textContent = c;
      }
    }, 700);
  });

  function finalScreenInit(){
    const no = qs("#noBtn");
    // slide away shortly after show
    setTimeout(()=> no.classList.add("slide-away"), 700);
    // runway jitter on hover (if she tries quickly)
    no.classList.add("runaway");
    no.addEventListener("mousemove", ()=>{
      const rX = Math.floor(Math.random()*70);
      const rY = Math.floor(Math.random()*60);
      no.style.setProperty("--rX", rX);
      no.style.setProperty("--rY", rY);
    });
  }

  // NO clicked (in case she taps super fast)
  qs("#noBtn").addEventListener("click", ()=> alert("Nice try ðŸ˜‰"));

  // YES click -> confetti + chime, with parallax shimmer
  qs("#yesBtn").addEventListener("click", ()=> {
    qs("#yesBtn").classList.add("hidden");
    qs("#noBtn").classList.add("hidden");
    startConfetti();
    shimmerBG();
    playChime();
    setTimeout(stopConfetti, 5200);
  });

  // Restart
  qs("#restart").addEventListener("click", ()=>{
    // reset any classes and go back to start
    qs("#yesBtn").classList.remove("hidden");
    const no = qs("#noBtn");
    no.classList.remove("hidden","slide-away","runaway");
    // reset typewriter
    typeEl.textContent = ""; twIndex = 0; setTimeout(typeNext, 200);
    show("s1");
  });

  /* ---------- ambient whoosh (WebAudio) ---------- */
  function whoosh(){
    try{
      const ac = audioC || new (window.AudioContext||window.webkitAudioContext)();
      audioC = ac;
      const o = ac.createOscillator();
      const g = ac.createGain();
      o.type = "sawtooth";
      const now = ac.currentTime;
      o.frequency.setValueAtTime(120, now);
      o.frequency.exponentialRampToValueAtTime(40, now+0.6);
      g.gain.setValueAtTime(0.0001, now);
      g.gain.exponentialRampToValueAtTime(0.2, now+0.1);
      g.gain.exponentialRampToValueAtTime(0.0001, now+0.7);
      o.connect(g).connect(ac.destination);
      o.start(now);
      o.stop(now+0.72);
    }catch(e){}
  }

  /* ---------- tasteful confetti (warm tones + small hearts) ---------- */
  const canvas = qs("#fx");
  const ctx = canvas.getContext("2d");
  const DPR = Math.max(1, window.devicePixelRatio || 1);
  function size(){ canvas.width = innerWidth * DPR; canvas.height = innerHeight * DPR; canvas.style.width = innerWidth+"px"; canvas.style.height = innerHeight+"px"; ctx.setTransform(DPR,0,0,DPR,0,0); }
  size(); addEventListener("resize", size);

  let bits = [], animating = false, parallax = 0;
  const PALETTE = ["#7b5cff","#a794ff","#ffd3a4","#ffdfbf","#ebe3ff"];

  function heartPath(x,y,s,rot){
    ctx.save();
    ctx.translate(x,y);
    ctx.rotate(rot);
    ctx.scale(s,s);
    ctx.beginPath();
    ctx.moveTo(0,-4);
    ctx.bezierCurveTo(4,-10,14,-6,0,8);
    ctx.bezierCurveTo(-14,-6,-4,-10,0,-4);
    ctx.closePath();
    ctx.restore();
  }

  function spawn(n=160){
    bits = [];
    for(let i=0;i<n;i++){
      bits.push({
        x: Math.random()*innerWidth,
        y: -10 - Math.random()*innerHeight,
        vx: (Math.random()-.5)*1.1,
        vy: 1.6 + Math.random()*2.3,
        rot: Math.random()*Math.PI,
        vr: (Math.random()-.5)*0.08,
        s: .55 + Math.random()*1.1,
        color: PALETTE[Math.floor(Math.random()*PALETTE.length)],
        shape: Math.random()<0.22 ? "heart" : "conf"
      });
    }
  }

  function tick(){
    if(!animating) return;
    ctx.clearRect(0,0,innerWidth,innerHeight);
    // parallax shimmer
    ctx.save();
    ctx.globalAlpha = 0.08;
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0, (Math.sin(parallax)*12)+5, innerWidth, 2);
    ctx.restore();
    parallax += 0.08;

    bits.forEach(b=>{
      b.x += b.vx;
      b.y += b.vy;
      b.rot += b.vr;
      if(b.y > innerHeight+12){ b.y = -12; b.x = Math.random()*innerWidth; }
      ctx.fillStyle = b.color;
      ctx.strokeStyle = b.color;
      if(b.shape==="heart"){
        heartPath(b.x,b.y,b.s,b.rot);
        ctx.fill();
      }else{
        ctx.save();
        ctx.translate(b.x,b.y);
        ctx.rotate(b.rot);
        ctx.fillRect(-1.5*b.s, -6*b.s, 3*b.s, 12*b.s);
        ctx.restore();
      }
    });
    requestAnimationFrame(tick);
  }

  function startConfetti(){ spawn(); animating = true; requestAnimationFrame(tick); }
  function stopConfetti(){ animating = false; ctx.clearRect(0,0,innerWidth,innerHeight); }

  /* ---------- subtle chime (WebAudio) ---------- */
  function playChime(){
    try{
      const ac = audioC || new (window.AudioContext||window.webkitAudioContext)();
      audioC = ac;
      const now = ac.currentTime;
      const o1 = ac.createOscillator();
      const g1 = ac.createGain();
      o1.type = "sine";
      o1.frequency.setValueAtTime(880, now);
      o1.frequency.exponentialRampToValueAtTime(1318.5, now + 0.35);
      g1.gain.setValueAtTime(0.0001, now);
      g1.gain.exponentialRampToValueAtTime(0.3, now + 0.02);
      g1.gain.exponentialRampToValueAtTime(0.0001, now + 1.2);
      o1.connect(g1).connect(ac.destination);
      o1.start(now);
      o1.stop(now + 1.25);
    }catch(e){}
  }
</script>
</body>
</html>
